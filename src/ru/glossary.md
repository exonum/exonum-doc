# Глоссарий

В документации Exonum используются определенные термины для описания ключевых
понятий в Exonum. На данной странице собраны такие термины.

!!! note "Примечание"
    Все термины здесь определены с учетом особенностей Exonum. Например, термин
    [*Транзакция*](#транзакция) описывает, как транзакции работают в Exonum.
    В сущности, транзакция может иметь много других значений, но они не
    рассматриваются в этом документе.

## Администратор

Лицо, участвующее в создании [блоков](#блок) и установлении правил в блокчейне.

В [приватных блокчейнах](#приватный-блокчейн), администраторы известны, они
указаны в протоколе блокчейна. Администраторы настраивают и управляют
[узлами-валидаторами](#валидатор) в сети, а также согласовывают изменения в
правилах обработки транзакций.

!!! note "Пример"
    Рассмотрим блокчейн Exonum, который реализует публичный реестр в конкретной
    стране. В этом случае администратор блокчейна это правительственное
    учреждение или группа учреждений, которым поручено вести публичные реестры
    согласно закону.

Напротив, в публичных блокчейнах (например, Биткоин) участники не указаны в
протоколе блокчейна. Валидаторы в таких сетях обычно анонимные.

## Аудитор

**Также** узел-аудитор

[Полный узел](#полный-узел) в сети блокчейн, который не участвует в создании
новых [блоков](#блок), а выполняет непрерывный аудит всех транзакций в сети.
Аудиторы идентифицируются с помощью [открытого ключа](#открытый-ключ) в сети
блокчейн. В отличие от [валидаторов](#валидатор),
добавление аудиторов не приводит к задержкам в обработке транзакций и не снижает
пропускную способность, поэтому в одной и той же сети блокчейн могут быть сотни
аудиторов.

!!! note "Пример"
    Рассмотрим блокчейн Exonum, который реализует публичный реестр в
    определенной стране. В этом случае узлы-аудиторы могут принадлежать
    неправительственным организациям, которые заинтересованы в мониторинге
    работы реестра.

## Аутентифицированный консенсус

Тип [консенсуса](#консенсус), в котором участники заранее известны и
аутентифицированы, обычно с помощью криптосистемы с открытым ключом (например,
[цифровой подписью](#цифровая-подпись)). Exonum использует алгоритм
аутентифицированного консенсуса, немного похожий на [PBFT][pbft], чтобы система
была [децентрализованной](#децентрализация) и выдерживала атаки
[византийских](#византийский-узел) [валидаторов](#валидатор).

## Блок

Упорядоченный список [транзакций](#транзакция) в блокчейне, аутентифицированный
по меньшей мере 2/3 [валидаторов](#валидатор), и некоторой дополнительной
информацией (такой, как [хеш](#хеш) предыдущего блока и хеш
[состояния блокчейна](#состояние-блокчейна) после добавления транзакций в блок).
Компактная форма блока, в которой транзакции заменяются корнем их
[дерева Меркла](#дерево-меркла), используется для связи с
[легкими клиентами](#легкий-клиент).

## Блокчейн

[Распределенный реестр](#распределенный-реестр), который использует систему
[связи хешей][wiki:linked-ts] для достижения неизменяемости журнала транзакций,
а также использует и другие криптографические инструменты для повышения
прозрачности системы.
Транзакции в блокчейне сгруппированы в [блоки](#блок), чтобы облегчить аудит с
помощью [легких клиентов](#легкий-клиент).

В то время как целью распределенного реестра является [децентрализованное](#децентрализация)
управление данными, одной из целей блокчейна является достижение прозрачности
действий [администраторов блокчейна](#администратор) и аудитируемости системы
третьими лицами (например, внутренними и внешними аудиторами, регуляторами и
конечными пользователями системы).

## Валидатор

[Полный узел](#полный-узел) в сети блокчейн с правом участия в
[алгоритме консенсуса](#консенсус) для создания [блоков](#блок). В Exonum
валидаторы идентифицируются с помощью
[глобальной конфигурации](#глобальная-конфигурация), которая содержит открытые
ключи всех валидаторов в сети. Набор валидаторов можно поменять, изменив
глобальную конфигурацию. Обычно набор валидаторов достаточно мал и состоит из
4-15 узлов.

## Византийский узел

Узел в распределенной сети, который действует вне [алгоритма консенсуса](#консенсус).
Византийское поведение может быть вызвано вредоносными намерениями, сбоями в
работе программного/аппаратного обеспечения или проблемами сетевого
подключения.

Алгоритмы консенсуса, способные противостоять византийскому поведению,
называются византийскими. Exonum использует византийский алгоритм консенсуса,
похожий на [PBFT][pbft]. Византийский алгоритм консенсуса Exonum способен
выдерживать до 1/3 византийских [валидаторов](#валидатор) &mdash; максимальный
возможный показатель в формате модели безопасности, которую использует
Exonum.

## Генезис блок

Самый первый [блок](#блок) в блокчейне. Генезис блок не связывается с хешем
предыдущего блока в блокчейне, взамен эта связь заполняется хешем-заполнителем
(32 байта нулей). Генезис блок содержит начальную
[глобальную конфигурацию](#глобальная-конфигурация) и больше никаких других
транзакций.

## Глобальная конфигурация

Часть [конфигурации](#конфигурация), общая для всех [полных узлов](#полный-узел).
Глобальная конфигурация является частью [состояния блокчейна](#состояние-блокчейна).
[Ядро](#ядро) определяет несколько глобальных параметров конфигурации, которые в
основном связаны с [консенсусом](#консенсус) и сетевыми взаимодействиями
(например, набор открытых ключей [валидаторов](#валидатор)).

## Двоичная сериализация

Сериализация [данных, хранящихся в блокчейне](#хранимый-тип-данных), и
[сообщений](#сообщение) в независимую от платформы последовательность байт в
соответствии с набором правил, определенных фреймворком Exonum. Двоичная
сериализация используется в Exonum для криптографических операций, таких как
генерация [хешей](#хеш) и [цифровых подписей](#цифровая-подпись).
Она реализована как в [ядре](#ядро), так и в [библиотеке легкого клиента](#легкий-клиент).

Формат сериализации Exonum оптимизирован для обеспечения почти нулевых
затрат на десериализацию в низкоуровневых средах программирования (таких, как
Rust).

!!! tip "Совет"
    Подробнее см. [*Сериализация*](../architecture/serialization.md).

## Дерево Меркла

**Также** дерево хешей

Структура данных на основе двоичного дерева, которая позволяет вычислять
общий [хеш](#хеш) списка элементов таким образом, что любой
конкретный элемент списка привязан к общему хешу через короткую ссылку. (Эта
ссылка называется *путь Меркла* или [*доказательство Меркла*](#доказательство-Меркла)).

Exonum использует деревья Меркла и аналогичную структуру данных для
ассоциативных массивов
(деревья Merkle [Patricia][wiki:p-tree]), чтобы собрать все
[состояния блокчейна](#состояние-блокчейна) в единый *хеш состояния*, записанный
в [блоках](#блок), и предоставить [доказательства](#доказательство-Меркла) для
[легких клиентов](#легкий-клиент).

!!! note "Примечание"
    В криптографии дерево Меркла применяет [схему обязательств][wiki:commitment]
    к списку элементов таким образом, что размер любого раскрытия сообщения
    логарифмичен по отношению к количеству элементов в списке.

## Децентрализация

Отсутствие единой точки отказа в системе. Например, отсутствие единого
администратора, обладающего привилегиями, которые позволяют выполнять
самовольные действия.

## Доказательство Меркла

Криптографическое доказательство того, что определенные данные являются частью
[криптографического обязательства][wiki:commitment], основанного на
[деревьях Меркла](#дерево-меркла) или их вариантах. Доказательство Меркла
позволяет компактно доказать, что определенные данные хранятся по указанному
ключу в [состоянии блокчейна](#состояние-блокчейна). В то же время
доказательство не раскрывает другую информацию о состоянии и не требует
репликации всех [транзакций](#транзакция) блокчейн сети.

Доказательства Меркла используются в ответах Exonum на [запросы на чтение](#запрос-на-чтение)
от [легких клиентов](#легкий-клиент). Используя доказательства, клиент может
проверить подлинность ответа без необходимости связываться с несколькими
полными узлами или реплицировать все транзакции в блокчейне.

## Закрытый ключ

Закрытый ключ согласно спецификации [Ed25519][ed25519]. Каждый закрытый ключ
соответствует определенному [открытому ключу](#открытый-ключ). Закрытый
ключ необходим для создания [цифровых подписей](#цифровая-подпись) [сообщений](#сообщение),
которые впоследствии могут быть сверены с сообщением и соответствующим открытым
ключом.

!!! summary "Детали реализации"
    Согласно [`libsodium`][libsodium], закрытые ключи занимают 64 байта в
    двоичной форме: 32 байта криптографического значения, используемого для
    генерации ключа, и 32 байта предварительно рассчитанного соответствующего
    открытого ключа. Последние 32 байта являются избыточными, но помогают
    ускорить вычисления.

## Запрос на чтение

[Конечная точка сервиса](#конечная-точка-сервиса) которая может использоваться
для извлечения данных из [состояния блокчейна](#состояние-блокчейна). Обычно
данные возвращаются с [доказательством](#доказательство-меркла) того, что данные
действительно являются частью состояния блокчейна и авторизованы большинством
[валидаторов](#валидатор).

## Конечная точка сервиса

Точка связи с [сервисом](#сервис). Существует три вида конечных точек:

- [Транзакции](#транзакция) позволяют атомарно изменять состояние блокчейна;
- [Запросы на чтение](#запрос-на-чтение) позволяют считывать данные из состояния
  блокчейна, обычно вместе с [доказательством](#доказательство-меркла);
- [Приватные API](#приватный-api) позволяют настраивать сервис локально.

Внешние объекты, такие как [легкие клиенты](#легкий-клиент) могут обращаться к
конечным точкам через REST API. Конфигурация REST API указана в сервисе.

## Консенсус

**Также** алгоритм консенсуса

Механизм достижения согласия между узлами в сети. В контексте [блокчейна](#блокчейн)
консенсусу необходимо противостоять ошибкам: ситуациям, когда узлы не реагируют
и/или прямо пытаются скомпрометировать работу блокчейна.

Существует два основных типа консенсуса:

- [Аутентифицированный консенсус](#аутентифицированный-консенсус), в котором
  участвующие узлы известны заранее. Этот тип консенсуса реализован в Exonum;
- Анонимный консенсус, в котором участники консенсуса заранее не известны. Этот
  тип консенсуса обычно используется в криптовалютах (например, Биткоин).

## Консенсусное сообщение

[Сообщение](#сообщений), которое генерируется [полным узлом](#полный-узел)
согласно [алгоритму консенсуса](#консенсус). Валидаторы обмениваются
консенсусными сообщениями для принятия [транзакций](#транзакция) в блокчейн
путем создания новых [блоков](#блок).

Консенсусные сообщения включают:

- `Propose`, `Prevote` и `Precommit` сообщения, которые соответствуют 3
  фазам [алгоритма консенсуса](#аутентифицированный-консенсус), используемого в
  Exonum;
- Запросы, которые используются полными узлами для запроса отсутствующих данных
  у других узлов;
- Сообщения `Block`, которые используются для передачи всего блока транзакций на
  отстающий полный узел;
- Вспомогательные сообщения, такие как `Status` и `Connect`.

!!! tip "Совет"
    Дополнительную информацию см. в разделах [*Консенсус*](architecture/consensus.md)
    и [*Запросы*](../advanced/consensus/requests.md).

## Конфигурация

Набор настраиваемых параметров, определяющих поведение [полного узла](#полный-узел).
Конфигурация состоит из двух частей: [глобальной](#глобальная-конфигурация)
и [локальной конфигураций](#локальная-конфигурация). Некоторые параметры
конфигурации
определяются [ядром](#ядро), например, максимальное количество транзакций в
[блоке](#блок). [Сервисы](#сервис) также могут определять и управлять
дополнительными параметрами конфигурации.

!!! tip "Совет"
    Дополнительную информацию см. в разделе [*Конфигурация*](../architecture/configuration.md).

## Легкий клиент

**Также** тонкий клиент

Узел в сети блокчейн, который не реплицирует все транзакции в блокчейне, а
только некоторую их часть, в которой клиент заинтересован и/или к которой
имеет доступ. Легкие клиенты могут связываться с [полными узлами](#полный-узел)
для [извлечения информации из блокчейна](#запрос-на-чтение)
и создания [транзакций](#транзакция). [Механизм доказательств](#доказательство-меркла)
позволяет минимизировать фактор доверия во время общения между узлами и
клиентами и защитить клиент от целого ряда атак.

## Локальная конфигурация

Часть [конфигурации](#конфигурация), которая является локальной для каждого
[полного узла](#полный-узел). Локальная конфигурация не является частью
[состояния блокчейна](#состояние-блокчейна), вместо этого она хранится как
локальный TOML файл, который считывается во время запуска узла. [Ядро](#ядро)
определяет несколько локальных параметров конфигурации, таких как
[закрытый ключ](#закрытый-ключ), используемый для подписания
[консенсусных и сетевых сообщений](#консенсусное-сообщение), созданных узлом.

## Открытый ключ

Открытый ключ согласно спецификации [Ed25519][ed25519]. Открытые ключи
используются для проверки [цифровых подписей](#цифровая-подпись) [сообщений](#сообщение).
Открытый ключ может быть связан с реальной личностью. Например, открытые ключи,
используемые в [консенсусе](#консенсус), привязаны к определенным
[валидаторам](#валидатор),
так как предполагается, что только определенный валидатор знает соответствующий
[закрытый ключ](#закрытый-ключ).

!!! summary "Детали реализации"
    Согласно [`libsodium`][libsodium], открытые ключи занимают 32 байта в
    двоичной форме.

## Полный узел

**Также** одноранговый узел

Узел в сети блокчейн, который реплицирует все транзакции в блокчейне и,
следовательно, имеет локальную копию всего [состояния блокчейна](#состояние-блокчейна).
В Exonum есть 2 категории полных узлов: [валидаторы](#валидатор)
и [аудиторы](#аудитор).

## Приватный API

[Конечная точка сервиса](#кончная-точка-сервиса), которая может использоваться
для администрирования локального экземпляра сервиса. Например, приватный API
может использоваться для изменения локальной конфигурации сервиса.

## Приватный блокчейн

Блокчейн, в котором [участники](#администратор) представляют собой ограниченный
набор сущностей с установленными реальными личностями. Соответственно,
[узлы-валидаторы](#валидатор) в приватном блокчейне немногочисленны и
аутентифицируются с помощью криптосистемы с открытым ключом.

Приватные блокчейны обычно используют вариации
[аутентифицированного консенсуса](#аутентифицированный-консенсус).

## Распределенный реестр

Распределенная система, которая хранит полный журнал [транзакций](#транзакция)
для всех операций в системе, так что любая часть данных в системе имеет
проверяемый аудиторский след. Все транзакции аутентифицируются, как правило,
с помощью [криптосистемы с открытым ключом][wiki:pkc]
используемой вместе с некоторой формой временных печатей для обеспечения
[неотказуемости][wiki:non-rep].

!!! note "Примечание"
    В общем распределенном реестре аудиторский след может быть разбросан по
    всем участникам системы. Таким образом, может быть трудно проверить
    согласованность всей системы.

[Блокчейны](#блокчейн) являются особым видом распределенных реестров с упором
на аудитируемость и прозрачность деятельности [администраторов](#администратор).

## Сервис

Основная точка расширения фреймворка Exonum, аналогичная в своей сущности
веб-сервисам. Сервисы определяют всю логику обработки [транзакций](#транзакция)
в любом блокчейне Exonum.

Внешне сервис представляет собой набор [конечных точек](#конечная-точка-сервиса),
которые позволяют манипулировать данными [состояния блокчейна](#состояние-блокчейна)
и извлекать их, возможно, вместе с [доказательствами](#доказательство-меркла).
По сути, сервис может определять различные сущности, включая схему [таблиц](#таблица),
[настраиваемые параметры](#конфигурация) и т.д.

!!! tip "Совет"
    Дополнительные сведения см. в разделе [*Сервисы*](architecture/services.md).

## Сериализация

Процесс преобразования структур данных Exonum в независимое от языка
программирования представление. Exonum определяет правила (де)сериализации для
[хранимых типов данных](#хранимый-тип-данных) и [сообщений](#сообщение).
Каждый из них может быть преобразован из/в 2 представления:
[двоичный](#двоичная-сериализация) и [JSON](#сериализация-json).

## Сериализация JSON

Сериализация [данных, хранящихся в блокчейне](#хранимый-тип-данных) и
[сообщений](#сообщение) в JSON. Сериализация JSON используется в Exonum для
[конечных точек сервисов](#конечная-точка-сервиса). Она реализована как в
[ядре](#ядро), так и в [библиотеке легкого клиента](#легкий-клиент).

## Сообщение

Подписанные [цифровой подписью](#цифровая-подпись) данные, которые передаются
через сеть Exonum. Существует два основных вида сообщений:

- [Консенсусные сообщения](#консенсусное-сообщение) используются среди полных
  узлов в ходе [алгоритма консенсуса](#консенсус);
- [Транзакции](#транзакция) используются для изменения
  [состояния блокчейна](#состояние-блокчейна) и обычно поступают от
  [внешних клиентов](#легкий-клиент).

## Состояние блокчейна

Фиксированное состояние, которое хранится каждым [полным узлом](#полный-узел) в
сети блокчейн, и к которому применяются [транзакции](#транзакция).
[Алгоритм консенсуса](#консенсус) гарантирует, что состояние блокчейна (а не
только журнала транзакций) идентично для всех полных узлов.

В Exonum состояние блокчейна реализуется как хранилище типа ключ-значение.
Оно реализовано с помощью [RocksDB][rocksdb]. Части хранилища соответствуют
[таблицам](#таблица), используемым [ядром](#ядро) и [сервисами](#сервис).

## Таблица

Структурированный набор данных (например, ассоциативный массив, набор или
список), который
обеспечивает высокоуровневую абстракцию поверх
[состояния блокчейна](#состояние-блокчейна). Таблицы используются
[сервисами](#сервис) для упрощения управления данными. Кроме того, некоторые
типы таблиц позволяют эффективно вычислять
[доказательства Меркла](#доказательство-меркла) для элементов таблицы.

## Транзакция

Атомарный патч, примененный к [состоянию блокчейна](#состояние-блокчейна),
который удовлетворяет критериям [ACID][wiki:acid]. Транзакции аутентифицируются
с помощью [цифровых подписей с открытым ключом](#цифровая-подпись),
т.е. авторство каждой транзакции известно и не может быть легко подменено.
Транзакции могут быть сгенерированы различными объектами в сети блокчейн,
например, [легкими клиентами](#легкий-клиент).

Транзакции упорядочены и собираются в [блоки](#блок) в ходе
[алгоритма консенсуса](#консенсус). Таким образом, транзакции применяются в
одинаковом порядке на всех [полных узлах](#полный-узел) в сети блокчейн.

Транзакции в Exonum являются подтипом [конечных точек сервисов](#кончная-точка-сервиса).
Все транзакции строятся по шаблонам и определяются внутри [сервисов](#сервис),
аналогично [хранимым процедурам][mysql-stored] в системах управления базами
данных. Конечные точки транзакции обычно задают определенные правила проверки,
такие как валидация цифровой подписи в транзакции. Если правила не выполняются
для конкретной транзакции, она не изменяет состояние блокчейна, но все равно
может быть записана в журнале транзакций.

!!! tip "Совет"
    Подробнее см. [*Транзакции*](architecture/transactions.md).

## Хеш

**Также** криптографический хеш

[SHA-256][sha-256] [криптографический хеш][wiki:hash] определенных данных.
Exonum использует хеши как уникальные идентификаторы [транзакций](#транзакция).
Хеши также используются для создания [деревьев Меркла](#дерево-меркла) и их
вариантов.

!!! summary "Детали реализации"
    Хеши SHA-256 занимают 32 байта в двоичной форме. Exonum использует
    [`sodiumoxide`][sodiumoxide]
    для расчета хешей на [полных узлах](#полный-узел) и [sha.js][sha.js] для
    аналогичных операций на [легких клиентах](#легкий-клиент).

## Хранимый тип данных

Тип данных, который может храниться как значение в
[в хранилище Exonum](#состояние-блокчейна). Хранимые типы
данных используют логику [двоичной сериализации](#двоичная-сериализация) для
преобразования данных в независимое от платформы представление.

!!! tip "Совет"
    Подробнее см. в разделе [*Хранилище*](../architecture/storage.md).

## Цифровая подпись

**Также** подпись

Цифровая подпись с открытым ключом в эллиптической криптографии [Ed25519][Ed25519].
Подпись сообщения доказывает, что подписавший знает конкретный
[закрытый ключ](#приватный-ключ), соответствующий общедоступному
[открытому ключу](#публичный-ключ). Подпись может быть сверена с этим открытым
ключом и подписанным сообщением, обеспечивая при этом *достоверность*
(т.е. факт того, что сообщение пришло от определенного источника) и
*целостность* (сообщение не изменялось после подписания) сообщения. Подписи
Ed25519 универсальны, то есть, проверяющему не требуется знать какую-либо
дополнительную информацию для проверки подписи.

!!! summary "Детали реализации"
    Цифровые подписи Ed25519 занимают 64 байта в двоичной форме. Exonum
    использует
    криптографическую Rust библиотеку [`sodiumoxide`][sodiumoxide] (обертка
    [`libsodium`][libsodium] для Rust) для создания и проверки цифровых подписей
    на [полных узлах](#полный-узел), а [TweetNaCl.js][tweetnacl] для выполнения
    аналогичных операций на [легких клиентах](#легкий-клиент).

## Ядро

В Exonum &mdash; это функционал, присутствующий во всех блокчейнах Exonum, независимо
от развернутых [сервисов](#сервис), инкапсулированный в репозиторий
[**exonum**][exonum].

Например, ядро включает в себя набор системных [таблиц](#таблица) (в которых,
в частности, может храниться набор всех транзакций, когда-либо совершенных в
блокчейне).

[wiki:linked-ts]: https://en.wikipedia.org/wiki/Linked_timestamping
[wiki:pkc]: https://ru.wikipedia.org/wiki/Криптосистема_с_открытым_ключом
[wiki:non-rep]: https://en.wikipedia.org/wiki/Non-repudiation
[wiki:acid]: https://ru.wikipedia.org/wiki/ACID
[rocksdb]: http://rocksdb.org
[exonum]: https://github.com/exonum/exonum/
[wiki:mt]: https://ru.wikipedia.org/wiki/Дерево_хешей
[wiki:p-tree]: https://en.wikipedia.org/wiki/Radix_tree
[wiki:commitment]: https://en.wikipedia.org/wiki/Commitment_scheme
[pbft]: http://pmg.csail.mit.edu/papers/osdi99.pdf
[mysql-stored]: https://dev.mysql.com/doc/refman/5.6/en/stored-routines.html
[sodiumoxide]: https://dnaq.github.io/sodiumoxide/sodiumoxide/index.html
[libsodium]: https://download.libsodium.org/doc/
[tweetnacl]: https://github.com/dchest/tweetnacl-js
[ed25519]: https://ed25519.cr.yp.to/
[wiki:hash]: https://ru.wikipedia.org/wiki/Криптографическая_хеш-функция
[sha-256]: http://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf
[sha.js]: https://www.npmjs.com/package/sha.js
